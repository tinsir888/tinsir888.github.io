<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>计算机网络 第三章 传输层协议 | tinsir888s hjemmeside</title><meta name="author" content="tinsir888"><meta name="copyright" content="tinsir888"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Kapitel 3 传输层协议 (需配合PPT)  3.1 传输层需要解决的基本问题  网络层——尽力而为 best effort，不保证可靠性 出现：延迟、乱序、出错、丢失等情况  传输层需要解决  可靠性问题 复用和分用（对于多进程，共享IP和网络接口）   3.2 TCP&amp;#x2F;IP体系结构中传输"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://tinsir888.github.io/posts/49c2d375.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,top_n_per_article:1,unescape:!1,languages:{hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"Copy Successful",error:"Copy Error",noSupport:"Browser Not Supported"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"Just now",min:"minutes ago",hour:"hours ago",day:"days ago",month:"months ago"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"Load More"},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"计算机网络 第三章 传输层协议",isPost:!0,isHome:!1,isHighlightShrink:!0,isToc:!0,postUpdate:"2024-01-26 11:48:38"}</script><script>(e=>{e.saveToLocal={set:(e,t,o)=>{if(0===o)return;const a={value:t,expiry:Date.now()+864e5*o};localStorage.setItem(e,JSON.stringify(a))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!(Date.now()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},Object.keys(t).forEach(e=>{n.setAttribute(e,t[e])}),document.head.appendChild(n)}),e.getCSS=(e,t=!1)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},document.head.appendChild(n)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="tinsir888s hjemmeside" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">311</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">74</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">32</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-regular fa-handshake"></i><span> 接力</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> 开往</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://travel.moe/go?travel=on"><i class="fa-fw fas fa-rocket"></i><span> 异次元</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/computernetwork.png)"><nav id="nav"><span id="blog-info"><a href="/" title="tinsir888s hjemmeside"><span class="site-name">tinsir888s hjemmeside</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-regular fa-handshake"></i><span> 接力</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> 开往</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://travel.moe/go?travel=on"><i class="fa-fw fas fa-rocket"></i><span> 异次元</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络 第三章 传输层协议</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-10-19T22:00:00.000Z" title="Created 2021-10-20 00:00:00">2021-10-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-01-26T10:48:38.106Z" title="Updated 2024-01-26 11:48:38">2024-01-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%8D%97%E5%BC%80%E8%AE%A1%E7%A7%91/">南开计科</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%8D%97%E5%BC%80%E8%AE%A1%E7%A7%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">计算机网络课程笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">4.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>13mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="计算机网络 第三章 传输层协议"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="kapitel-3-传输层协议-需配合ppt"><a class="markdownIt-Anchor" href="#kapitel-3-传输层协议-需配合ppt"></a> Kapitel 3 传输层协议 (需配合PPT)</h1><h2 id="31-传输层需要解决的基本问题"><a class="markdownIt-Anchor" href="#31-传输层需要解决的基本问题"></a> 3.1 传输层需要解决的基本问题</h2><ul><li>网络层——尽力而为 best effort，不保证可靠性</li><li>出现：延迟、乱序、出错、丢失等情况</li></ul><p>传输层需要解决</p><ul><li><mark>可靠性问题</mark></li><li>复用和分用（对于多进程，共享IP和网络接口）</li></ul><h2 id="32-tcpip体系结构中传输层协议与服务"><a class="markdownIt-Anchor" href="#32-tcpip体系结构中传输层协议与服务"></a> 3.2 TCP/IP体系结构中传输层协议与服务</h2><p>基本功能：复用分用、可靠性</p><p>传输层执行的动作</p><ul><li><p>发送端：将应用层的消息封装成传输层的数据单元，传递到网络层</p></li><li><p>接收端：将从网络层接收的传输层数据单元，处理后交给应用层</p></li><li><p>传输控制协议TCP（Transport Control Protocol）</p><ul><li>为进程间通信提供面向连接的、可靠的传输服务</li><li>实现复用分用、差错检测、确认重传、流量控制等传输层功能</li></ul></li><li><p>用户数据报协议UDP（User Datagram Protocol）</p><ul><li>为进程间通信提供非连接的、不可靠的传输服务</li><li>实现复用分用、差错检测等传输层功能</li></ul></li></ul><h2 id="33-用户数据报协议udp"><a class="markdownIt-Anchor" href="#33-用户数据报协议udp"></a> 3.3 用户数据报协议（UDP）</h2><ul><li>特点</li></ul><p>发送方和接收方不需要握手过程</p><p>每个UDP数据单元（<strong>数据报</strong>）独立传输</p><p>提供<strong>复用分用</strong>功能和<strong>可选的差错检测</strong>功能</p><p>支持组播通信（点到多点通信）</p><p>不提供可靠性保证：无确认重传、可能有出错、丢失、乱序等现象</p><ul><li><p>数据包格式：长度、检验和</p></li><li><p>复用分用：进程标识：目的IP地址+目的端口号</p></li><li><p>差错检测</p><ul><li>IPv4中可选，IPv6中必选</li><li>发送端：利用自己产生的伪首部和发送的UDP数据报计算校验和</li><li>接收端：利用自己产生的伪首部和接收的UDP数据报计算校验和</li><li>伪首部：包含源IP地址、目的IP地址、协议类型等域段</li></ul></li></ul><h3 id="校验和计算方法"><a class="markdownIt-Anchor" href="#校验和计算方法"></a> 校验和计算方法</h3><p>发送端</p><ul><li>产生伪首部，校验和域段清0，将数据报用0补齐为16位整数倍</li><li>将伪首部和数据报一起看成16位整数序列</li><li>进行16 位二进制反码求和运算，计算结果取反写入校验和域段</li></ul><p>接收端</p><ul><li>产生伪首部，将数据报用0补齐为16为整数倍</li><li>按16位整数序列，采用16 位二进制反码求和运算</li><li>如果计算结果位全1，没有检测到错误；否则，说明数据报存在差错</li></ul><p>计算结果位全1，可能没错；计算结果有0，一定有错</p><p><mark>伪首部不传输，0填充也不传输</mark>，接收方需自己形成伪首部进行校验</p><p>校验和计算<strong>最高位溢出的话加到最低位，最后求反</strong>。</p><p>校验时直接算循环进位的加法，不需要单独提出校验和位比对。</p><ul><li><p>使用伪首部的目的是检验UDP数据报是否到达真正的目的地</p></li><li><p>伪首部的使用破坏了层次划分的基本前提，即每一层的功能独立</p><p>目的主机的IP地址UDP通常知道，源IP的使用需要通过路由选择决定</p></li></ul><p><strong>IP首部、ICMP、UDP、TCP都需要计算校验和，方法类似</strong></p><ul><li>使用UDP服务的应用<ul><li>流媒体应用（实时音频和视频）通常使用UDP服务<ul><li>能够容忍一定的丢失</li><li>对时延敏感</li></ul></li><li>其他使用UDP服务的应用<ul><li>DNS</li><li>SNMP</li></ul></li><li>需要在UDP之上实现可靠传输，即在应用层增加可靠机制</li></ul></li><li>为什么提供UDP服务？<ul><li>不需要建立连接，建立连接需要增加延时，特别对于简单的交互应用</li><li>协议简单：在发送端和接收端不需要维护连接状态</li><li>数据报头部短，额外开销小</li><li>无拥塞控制</li></ul></li></ul><h2 id="34-可靠数据传输"><a class="markdownIt-Anchor" href="#34-可靠数据传输"></a> 3.4 可靠数据传输</h2><ul><li>基本原理<ul><li>涉及多个层次（应用层、传输层、链路层）</li><li>计算机网络 TOP 10 问题</li></ul></li><li>rdt 可靠数据传输协议</li><li>应用层若需要可靠数据传输，并且认为传输层及以下为可靠信道</li><li>网络层是不可靠信道</li><li>要在传输层实现可靠数据传输，则在传输层实现rdt协议</li><li>使用有限状态机（FSM）描述发送端和接收端的状态和状态迁移</li><li>考虑单向数据传输，控制信息可以双向传输</li></ul><p><strong>rdt没有考虑失序问题，TCP中可能发生失序问题</strong></p><h3 id="完全可靠通道上的可靠数据传输rdt10"><a class="markdownIt-Anchor" href="#完全可靠通道上的可靠数据传输rdt10"></a> 完全可靠通道上的可靠数据传输：rdt1.0</h3><ul><li>下层通道是完全可靠的<ul><li>无位错误</li><li>无分组丢失</li></ul></li></ul><h3 id="具有位错误通道上的可靠数据传输rdt20"><a class="markdownIt-Anchor" href="#具有位错误通道上的可靠数据传输rdt20"></a> 具有位错误通道上的可靠数据传输：rdt2.0</h3><p>假设下层通道可能造成某些位出现错误，不考虑丢失</p><p>自动重传请求</p><ul><li>ACK 确认接收</li><li>NAK 出现错误，通知发送端需要重传</li></ul><p>增加功能</p><ul><li>差错检测</li><li>接收端反馈</li><li>发送端重传</li></ul><p>停等机制</p><p>存在问题</p><ul><li>ACK/NAK受损：发送端无法确认接收端的状况，但不能简单重传（可能重复接收）</li><li>处理重复接收问题<ul><li>发送端在每个分组中增加序列号</li><li>如果无法判断是ACK或NAK，则重传当前的分组</li><li>接收端丢弃重复的分组</li></ul></li></ul><h3 id="rdt21解决rdt20的问题"><a class="markdownIt-Anchor" href="#rdt21解决rdt20的问题"></a> rdt2.1：解决rdt2.0的问题</h3><p>在rdt2.0基础上需要增加</p><ul><li>发送端在每个分组中增加序列号</li><li>接收端根据序列号判断是否是重复的分组</li><li>接收端在ACK/NAK分组中增加校验字段</li></ul><h3 id="rdt22对rdt21的改进"><a class="markdownIt-Anchor" href="#rdt22对rdt21的改进"></a> rdt2.2：对rdt2.1的改进</h3><ul><li>与rdt2.1功能相同，只使用ACK，不再使用NAK(NAK-free)</li><li>接收端通过发送对最后正确收到的分组的ACK代替NAK<ul><li>ACK中必须携带所确认分组的序列号</li></ul></li><li>发送端接收到重复的ACK，代表对当前分组的NAK，则<ul><li>重传当前的分组</li></ul></li></ul><h3 id="rdt30通道既有差错又有丢失"><a class="markdownIt-Anchor" href="#rdt30通道既有差错又有丢失"></a> rdt3.0：通道既有差错又有丢失</h3><p>下层通道可能会有分组丢失（数据分组或ACK分组）</p><p>前面的校验和、序列号、ACK、重传机制等不足以解决丢失检测问题</p><p>解决方法：发送端等待一个合理的时间（需要一个定时器）</p><ul><li>如果未收到ACK，则重传当前的分组</li><li>如果分组仅仅是被延迟，或是ACK丢失，会造成接收端重复接收</li><li>接收端需要根据序列号判断重复的分组，并丢弃</li></ul><p>性能问题（停等协议）</p><p>性能优化：使用流水线</p><h3 id="流水线"><a class="markdownIt-Anchor" href="#流水线"></a> 流水线</h3><p>在确认未返回之前允许发送多个分组</p><p>两种典型的流水线协议：</p><ul><li>回退N：Go-Back-N (GBN)</li><li>选择重传：Selective Repeat (SR)<ul><li>发送端<ul><li>接收上层数据：如果发送窗口中有可用的序号，发送分组</li><li>超时：重传分组n，重启定时器</li><li>接收 ACK：n在区间内，将分组n标记已接受，如果是窗口中最小的未确认分组，则窗口向前滑动，基序号为下一个未确认分组的序号</li></ul></li><li>接收端<ul><li>n在区间base，base+n-1内，发送 ACK 缓存失序分组，按序列到达的分组交付给上层，窗口前滑</li><li>n在区间base-n，base-1内，发送ACK</li></ul></li></ul></li></ul><h2 id="35-传输控制协议tcp"><a class="markdownIt-Anchor" href="#35-传输控制协议tcp"></a> 3.5 传输控制协议（TCP）</h2><h3 id="特点"><a class="markdownIt-Anchor" href="#特点"></a> 特点</h3><ul><li><p>提供可靠服务：按序、可靠交付</p><ul><li>提供字节流服务，不识别消息边界</li></ul></li><li><p>可靠传输机制</p><ul><li>提供差错检测功能，正确接收返回确认</li><li>使用序列号检测丢失和乱序</li><li>超时重传机制，解决出错、丢失问题</li><li>支持流水线机制，自适应窗口</li></ul></li><li><p>面向连接：发送数据前需要握手</p><ul><li>三次握手建立连接</li><li>初始化参数 分配缓冲区</li></ul></li><li><p>提供复用分用功能</p></li><li><p>点对点</p></li><li><p>流量控制和拥塞控制</p></li></ul><h3 id="段格式"><a class="markdownIt-Anchor" href="#段格式"></a> 段格式</h3><ul><li>头长度</li><li>接收窗口通告</li><li>标志位</li><li>选项格式</li></ul><h3 id="复用分用"><a class="markdownIt-Anchor" href="#复用分用"></a> 复用分用</h3><ul><li>通信之前通过三次握手建立 TCP 连接<ul><li>分配缓冲区，协商参数</li></ul></li><li>连接标识（四元组）：源 IP、目的 IP、源端口、目的端口</li><li>通过建立 TCP 连接为应用进程提供可靠的字节流服务</li></ul><h3 id="可靠数据传输"><a class="markdownIt-Anchor" href="#可靠数据传输"></a> 可靠数据传输</h3><ul><li>基本机制<ul><li>发送端：发送数据、等待确认、超时重传</li><li>接收端：差错检测、累积确认（按序正确接收到字节的下一个字节序列号）</li></ul></li><li>支持流水线机制<ul><li>发送序号：32位</li><li>确认序号：32位</li><li><strong>每个字节都有序列号</strong>，对段的边界没有要求</li></ul></li><li>乱序段处理：未明确规定<ul><li>不缓存：处理简单、效率低</li><li>缓存：效率高、复杂</li></ul></li></ul><p>思考：TCP 累积确认机制中，等待500ms确认的原因</p><blockquote><p>1、收到数据包的序号前面还有需要接收的数据包。因为发送方发送数据时，并不是需要等上次发送数据被Ack就可以继续发送TCP包，而这些TCP数据包达到的顺序是不保证的，这样接收方可能先接收到后发送的TCP包（注意提交给应用层时是保证顺序的）。<br>2、为了降低网络流量，ACK有延迟确认机制。<br>3、ACK的值到达最大值后，又会从0开始。</p></blockquote><h3 id="流量控制"><a class="markdownIt-Anchor" href="#流量控制"></a> 流量控制</h3><ul><li><p>流量控制的目的：避免发送端发送数据过快，接收端不能及时接收造成缓冲区溢出</p><ul><li>增加流控功能后，发送窗口还需要受接收能力的约束</li></ul></li><li><p>可变的滑动窗口：接收端利用接收窗口通告域段告知发送端接收端缓冲区剩余空间，发送端依据通告调整发送窗口大小</p></li><li><p>滑动窗口发送端</p><ul><li>LastByteAcked≤LastByteSent</li><li>LastByteSent≤LastByteWritten</li><li>缓存的数据=LastByteWritten-LastByteAcked</li></ul></li><li><p>滑动窗口接收端</p><ul><li>LastByteRead＜NextByteExpected</li><li>NextByteExpected≤LastByteRcvd</li><li>缓存的数据=LastByteRead-LastByteRead</li></ul></li><li><p>流量控制接收端ACK报文丢失，会造成死锁，如何解决？</p><ul><li>发送端在收到ACK报文window=0时启动定时器，超时发送较小的探测数据包</li><li>接收端对每个发出的ACK报文启动定时器，超时未收到数据重发ACK</li></ul></li><li><p>接收窗口对性能的影响</p><ul><li>较小的缓冲区会影响网络的吞吐率</li><li>过大的缓冲区会浪费主机的存储资源</li></ul></li><li><p>流量控制的性能问题，解决发送端和接收端有哪些解决策略？</p><ul><li>发送端每次“大车拉小货”：必须装载到一定的数据量才发</li><li>接收端每次请求“货很少”：等待上层进程读取较多数据后再发送ACK请求</li></ul></li></ul><h3 id="传输控制协议-tcp-连接管理"><a class="markdownIt-Anchor" href="#传输控制协议-tcp-连接管理"></a> 传输控制协议 TCP 连接管理</h3><h4 id="tcp连接开启"><a class="markdownIt-Anchor" href="#tcp连接开启"></a> TCP连接开启</h4><p>步骤一：TCP A端发送SYN段</p><ul><li>分配缓冲区，选择A→B初始序列号ISN</li></ul><p>步骤二：TCP B端接收SYN段，回送SYN＋ACK段</p><ul><li>分配缓冲区，选择B→A初始号序列</li></ul><p>步骤三：TCP A端回送ACK</p><h4 id="tcp连接关闭"><a class="markdownIt-Anchor" href="#tcp连接关闭"></a> TCP连接关闭</h4><p>步骤一：A端发送FIN段</p><ul><li>A不再向B发送数据，但可以接收数据</li></ul><p>步骤二：B端收到FIN，回送ACK</p><ul><li>B仍可以向A发送数据</li></ul><p>步骤三：B端发送FIN段，等待A返回ACK</p><p>步骤四：A收到FIN，回送ACK，等待两倍的段生存期关闭连接，B端收到ACK，关闭连接</p><p>##　3.6 理解网络拥塞</p><p>排队时延，丢弃</p><p>拥塞控制</p><ul><li><p>网络拥塞：主机发送的数据过多或过快，造成网络中的路由器（或其他设备）无法及时处理，从而引入时延或丢弃</p></li><li><p>存储转发交换所采用的统计多路复用机制中，拥塞不可避免</p><ul><li>统计多路复用可以有效利用链路带宽资源</li><li>轻度拥塞可以接受，中度或严重拥塞需要避免</li></ul></li><li><p>拥塞控制也是网络中的Top 10问题</p></li><li><p>注意：拥塞控制与流量控制的区别</p><blockquote><p>拥塞控制：拥塞控制是作用于网络的，它是防止过多的数据注入到网络中，避免出现网络负载过大的情况；常用的方法就是：（ 1 ）慢开始、拥塞避免（ 2 ）快重传、快恢复。</p><p>流量控制：流量控制是作用于接收者的，它是控制发送者的发送速度从而使接收者来得及接收，防止分组丢失的。</p></blockquote></li></ul><h3 id="拥塞控制方法"><a class="markdownIt-Anchor" href="#拥塞控制方法"></a> 拥塞控制方法</h3><p>端到端拥塞控制</p><ul><li>网络中无明确的反馈</li><li>端系统通过观察丢失、延迟推断是否发生拥塞</li><li>TCP采用的拥塞控制策略</li></ul><p>网络辅助的拥塞控制</p><ul><li>路由器提供到端系统的反馈</li><li>例如：可以使用1位指示拥塞（如X.25, ATM）</li></ul><h2 id="37-tcp拥塞控制机制"><a class="markdownIt-Anchor" href="#37-tcp拥塞控制机制"></a> 3.7 TCP拥塞控制机制</h2><p>目标：既不造成网络严重拥塞，又能更快地传输数据</p><ul><li>关键问题：发送多快比较恰当？</li></ul><p>带宽探测：接收到ACK提高传输速率，发生丢失事件降低传输速率</p><ul><li>ACK返回：说明网络并未拥塞，可以继续提高发送速率</li><li>丢失事件：假设所有丢失是由于拥塞造成的，降低发送速率</li></ul><p><strong>TCP的拥塞控制的锯齿现象</strong></p><p>TCP拥塞控制控制窗口</p><ul><li><p>采用基于窗口的方法，通过拥塞窗口的增大或减小控制发送速率</p><p>LastByteSent -LastByteAcked≤CongestionWindow(cwnd)</p><p>实际发送窗口取决于接收通告窗口和拥塞控制窗口中较小值</p></li></ul><p>TCP拥塞控制：慢启动阶段</p><ul><li>初始拥塞窗口：cwnd=1一个TCP段大小(MSS)</li><li>每个RTT，cwnd翻倍（指数增长）</li><li>每接收到一个ACK，cwnd增1(MSS)</li><li>当连接初始建立或报文段超时未得到确认时，TCP拥塞控制进入慢启动阶段</li><li>特点：初始值小，增长速度快</li></ul><p>TCP拥塞控制：拥塞避免阶段</p><ul><li><p>阈值ssthresh：拥塞窗口达到该阈值时，慢启动阶段结束，进入拥塞避免阶段</p></li><li><p>每个RTT，cwnd增1（线性增长）</p></li><li><p>注意：TCP使用字节计数，当收到ACK时，拥塞窗口计算如下：</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>+</mo><mi>M</mi><mi>S</mi><mi>S</mi><mo>∗</mo><mfrac><mrow><mi>M</mi><mi>S</mi><mi>S</mi></mrow><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">cwnd=cwnd+MSS*\frac{MSS}{cwnd}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:.02691em">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.77777em;vertical-align:-.08333em"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:.02691em">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.872331em"><span style="top:-2.6550000000000002em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight" style="margin-right:.02691em">w</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p></li></ul><p>TCP拥塞控制：丢失检测</p><ul><li>通过超时检测丢失：<ul><li>阈值ssthresh= cwnd/2</li><li>cwnd=1，进入慢启动阶段</li></ul></li><li>通过三次重复ACK检测丢失（TCP RENO算法）：<ul><li>阈值ssthresh= cwnd/2</li><li>cwnd= ssthresh+3，进入线性增长（拥塞避免阶段）</li><li>注：重复ACK指明网络仍可以交付一些报文段（拥塞不严重）</li></ul></li><li>TCP Tahoe算法对于两种丢失情况均将cwnd设成1，并进入慢启动阶段</li></ul><p>TCP拥塞控制：吞吐率问题讨论</p><ul><li><p>TCP连接的吞吐率与拥塞窗口大小和RTT相关，我们假设：</p><ul><li>忽略慢启动阶段</li><li>总有数据要发送</li><li>设W为丢失事件发生时拥塞窗口的大小，W和RTT不变</li><li>一个连接的平均吞吐率=0.75*W/RTT​</li></ul></li><li><p>TCP长肥管道问题</p><ul><li><p>例如：报文段长度为1500字节，RTT为100毫秒，要获得10Gbps的吞吐率，要求平均窗口长度= 83333报文段</p><p>100ms*10^6(bit/ms)/8(bit/byte)/1500byte=83333个报文段</p></li><li><p>假设丢包率为L，则</p><p>一个连接的平均吞吐量≈1.22*MSS/(RTT*sqrt(L))</p></li><li><p>要获得10 Gbps的吞吐量，则LL≈<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mtext>−</mtext><mn>10</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2×10^{−10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.72777em;vertical-align:-.08333em"></span><span class="mord">2</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8141079999999999em;vertical-align:0"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>（非常小的丢失率，很难达到）</p></li></ul></li></ul><p>TCP拥塞控制：公平性问题讨论</p><ul><li><p>公平性的目标：如果有K个TCP连接共享带宽为R的瓶颈链路，每个连接应获得R/K的平均速率</p></li><li><p>两个竞争的连接：</p><p>假设两个连接RTT相等，从源主机到目的主机只有一条TCP连接</p><p>RTT越小拥塞窗口增速越快</p></li><li><p>TCP与UDP是否公平？</p><p>有些多媒体应用通常使用UDP，以恒定的速率发送音视频，能容忍一些丢失，避免TCP拥塞控制带来的速率限制及抖动</p><p>UDP流量会压制TCP流量！（采用哪些方法可以解决？）</p><blockquote><p>在udp之上做其它协议时，实现拥塞控制，使得其与TCP流友好相处。</p></blockquote></li><li><p>多TCP连接的公平性问题</p></li></ul><p>TCP拥塞控制：当前实现的有代表性的几个算法</p><ul><li>New RENO算法<ul><li>RENO仅考虑了每次拥塞发生时只丢失一个报文段的情形</li><li>New RENO主要解决一次拥塞多个报文段丢失，而造成的拥塞窗口和阈值多次折半问题（使TCP吞吐率降低）</li></ul></li><li>Cubic算法<ul><li>Linux内核2.6之后的默认TCP拥塞控制算法</li><li>解决由于拥塞窗口的变化对RTT的依赖而造成的不公平性问题</li></ul></li><li>BBR算法<ul><li>2016年由谷歌提出的，目前已集成到Linux 4.9内核中</li><li>BBR 算法不将出现丢包或时延增加作为拥塞的信号</li><li>BBR 算法周期性地探测网络的容量，交替测量一段时间内的带宽（BtlBw）极大值和时延（RTprop）极小值，将其乘积作为拥塞窗口大小</li></ul></li></ul><p>TCP拥塞控制：显示拥塞通知（ECN）</p><ul><li>一种网络辅助的拥塞控制机制，在RFC3168中定义</li><li>路由器使用IP数据包首部TOS域段中的两位指示网络拥塞</li><li>采用前向通知：网络拥塞通知携带到接收端</li><li>接收端在返回的ACK中设置ECE位（TCP报文段的保留字段的低位），将网络拥塞通知给发送端</li></ul></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://tinsir888.github.io">tinsir888</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://tinsir888.github.io/posts/49c2d375.html">https://tinsir888.github.io/posts/49c2d375.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener external nofollow noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="/img/computernetwork.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3ca6d499.html" title="网络技术与应用 第四章 无线局域网组网技术"><img class="cover" src="/img/nettech.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">网络技术与应用 第四章 无线局域网组网技术</div></div></a></div><div class="next-post pull-right"><a href="/posts/e60ba705.html" title="汇编语言与逆向技术基础 四、数据传送与寻址"><img class="cover" src="/img/assembler.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">汇编语言与逆向技术基础 四、数据传送与寻址</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/posts/c7b7c7a1.html" title="网络技术与应用 第九章 接入互联网"><img class="cover" src="/img/nettech.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-05</div><div class="title">网络技术与应用 第九章 接入互联网</div></div></a></div><div><a href="/posts/eb4989da.html" title="网络技术与应用 第八章 路由器与路由选择"><img class="cover" src="/img/nettech.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-23</div><div class="title">网络技术与应用 第八章 路由器与路由选择</div></div></a></div><div><a href="/posts/876517a3.html" title="计算机网络 第五章 接口层原理与协议"><img class="cover" src="/img/computernetwork.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-17</div><div class="title">计算机网络 第五章 接口层原理与协议</div></div></a></div><div><a href="/posts/7823face.html" title="网络技术与应用 第七章 IP 地址与 ARP"><img class="cover" src="/img/nettech.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-15</div><div class="title">网络技术与应用 第七章 IP 地址与 ARP</div></div></a></div><div><a href="/posts/5d3a6ca1.html" title="网络技术与应用 第六章 IP 数据报"><img class="cover" src="/img/nettech.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-09</div><div class="title">网络技术与应用 第六章 IP 数据报</div></div></a></div><div><a href="/posts/3c611a3c.html" title="计算机网络 第四章 网络层协议"><img class="cover" src="/img/computernetwork.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-03</div><div class="title">计算机网络 第四章 网络层协议</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div class="comment-switch"><span class="first-comment">Giscus</span><span id="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">tinsir888</div><div class="author-info__description">Elysium :-)</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">311</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">74</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">32</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.github.com/tinsir888"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/tinsir888" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:smalltalk.odin@protonmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Ηλύσια Πεδία ;-)</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#kapitel-3-%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE-%E9%9C%80%E9%85%8D%E5%90%88ppt"><span class="toc-number">1.</span> <span class="toc-text">Kapitel 3 传输层协议 (需配合PPT)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-%E4%BC%A0%E8%BE%93%E5%B1%82%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.</span> <span class="toc-text">3.1 传输层需要解决的基本问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-tcpip%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%AD%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%E4%B8%8E%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.2.</span> <span class="toc-text">3.2 TCP&#x2F;IP体系结构中传输层协议与服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AEudp"><span class="toc-number">1.3.</span> <span class="toc-text">3.3 用户数据报协议（UDP）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E5%92%8C%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.1.</span> <span class="toc-text">校验和计算方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-number">1.4.</span> <span class="toc-text">3.4 可靠数据传输</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E5%85%A8%E5%8F%AF%E9%9D%A0%E9%80%9A%E9%81%93%E4%B8%8A%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93rdt10"><span class="toc-number">1.4.1.</span> <span class="toc-text">完全可靠通道上的可靠数据传输：rdt1.0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E6%9C%89%E4%BD%8D%E9%94%99%E8%AF%AF%E9%80%9A%E9%81%93%E4%B8%8A%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93rdt20"><span class="toc-number">1.4.2.</span> <span class="toc-text">具有位错误通道上的可靠数据传输：rdt2.0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rdt21%E8%A7%A3%E5%86%B3rdt20%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.3.</span> <span class="toc-text">rdt2.1：解决rdt2.0的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rdt22%E5%AF%B9rdt21%E7%9A%84%E6%94%B9%E8%BF%9B"><span class="toc-number">1.4.4.</span> <span class="toc-text">rdt2.2：对rdt2.1的改进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rdt30%E9%80%9A%E9%81%93%E6%97%A2%E6%9C%89%E5%B7%AE%E9%94%99%E5%8F%88%E6%9C%89%E4%B8%A2%E5%A4%B1"><span class="toc-number">1.4.5.</span> <span class="toc-text">rdt3.0：通道既有差错又有丢失</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="toc-number">1.4.6.</span> <span class="toc-text">流水线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AEtcp"><span class="toc-number">1.5.</span> <span class="toc-text">3.5 传输控制协议（TCP）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">1.5.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AE%B5%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.5.2.</span> <span class="toc-text">段格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E7%94%A8%E5%88%86%E7%94%A8"><span class="toc-number">1.5.3.</span> <span class="toc-text">复用分用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-number">1.5.4.</span> <span class="toc-text">可靠数据传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">1.5.5.</span> <span class="toc-text">流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE-tcp-%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.6.</span> <span class="toc-text">传输控制协议 TCP 连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E8%BF%9E%E6%8E%A5%E5%BC%80%E5%90%AF"><span class="toc-number">1.5.6.1.</span> <span class="toc-text">TCP连接开启</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E8%BF%9E%E6%8E%A5%E5%85%B3%E9%97%AD"><span class="toc-number">1.5.6.2.</span> <span class="toc-text">TCP连接关闭</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">1.5.7.</span> <span class="toc-text">拥塞控制方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#37-tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%9C%BA%E5%88%B6"><span class="toc-number">1.6.</span> <span class="toc-text">3.7 TCP拥塞控制机制</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/1b140fcb.html" title="Fair AI/ML 9 On Fully Justified Representation"><img src="/img/AUFairAI.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Fair AI/ML 9 On Fully Justified Representation"></a><div class="content"><a class="title" href="/posts/1b140fcb.html" title="Fair AI/ML 9 On Fully Justified Representation">Fair AI/ML 9 On Fully Justified Representation</a><time datetime="2025-04-02T22:00:00.000Z" title="Created 2025-04-03 00:00:00">2025-04-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/aab61520.html" title="丹麦语 DU 3.4 3 Noget om musik"><img src="/img/dansk-du34.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="丹麦语 DU 3.4 3 Noget om musik"></a><div class="content"><a class="title" href="/posts/aab61520.html" title="丹麦语 DU 3.4 3 Noget om musik">丹麦语 DU 3.4 3 Noget om musik</a><time datetime="2025-04-01T22:00:00.000Z" title="Created 2025-04-02 00:00:00">2025-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/92799942.html" title="丹麦语 DU 3.4 2 Noget om skole og uddannelse"><img src="/img/dansk-du34.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="丹麦语 DU 3.4 2 Noget om skole og uddannelse"></a><div class="content"><a class="title" href="/posts/92799942.html" title="丹麦语 DU 3.4 2 Noget om skole og uddannelse">丹麦语 DU 3.4 2 Noget om skole og uddannelse</a><time datetime="2025-03-25T23:00:00.000Z" title="Created 2025-03-26 00:00:00">2025-03-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/53f223fa.html" title="丹麦语 DU 3.4 1 De fire årstider"><img src="/img/dansk-du34.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="丹麦语 DU 3.4 1 De fire årstider"></a><div class="content"><a class="title" href="/posts/53f223fa.html" title="丹麦语 DU 3.4 1 De fire årstider">丹麦语 DU 3.4 1 De fire årstider</a><time datetime="2025-02-26T23:00:00.000Z" title="Created 2025-02-27 00:00:00">2025-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ecf4c5b0.html" title="意大利语 A1 Unità 2"><img src="/img/italiano-a1.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="意大利语 A1 Unità 2"></a><div class="content"><a class="title" href="/posts/ecf4c5b0.html" title="意大利语 A1 Unità 2">意大利语 A1 Unità 2</a><time datetime="2025-02-25T23:00:00.000Z" title="Created 2025-02-26 00:00:00">2025-02-26</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/computernetwork.png)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By tinsir888</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a><span class="footer-separator">|</span><span> </span><a href="https://icp.gov.moe/?keyword=20248537" rel="external nofollow noreferrer" target="_blank"><img src="https://icp.gov.moe/images/ico64.png" alt="icon" width="16" height="16" style="vertical-align:middle;margin-right:5px">萌ICP备20248537号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,a="%%{init:{ 'theme':'"+t+"'}}%%\n"+d.textContent,i=mermaid.render(r,a);var m;"string"==typeof i?(m=i,d.insertAdjacentHTML("afterend",m)):i.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})},n=()=>{window.loadMermaid?t():getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(t)};btf.addGlobalFn("themeChange",t,"mermaid"),window.pjax?n():document.addEventListener("DOMContentLoaded",n)})()</script><script>(()=>{const t=t=>"dark"===t?"dark":"light",e=()=>{const e=Object.assign({src:"https://giscus.app/client.js","data-repo":"tinsir888/tinsir888.github.io-gittalk","data-repo-id":"R_kgDOLoNheQ","data-category-id":"DIC_kwDOLoNhec4Cktkv","data-mapping":"pathname","data-theme":t(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0},null),a=document.createElement("script");for(let t in e)a.setAttribute(t,e[t]);document.getElementById("giscus-wrap").appendChild(a)};btf.addGlobalFn("themeChange",e=>{(t=>{const e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:t},"https://giscus.app")})({setConfig:{theme:t(e)}})},"giscus"),e()})()</script><script>(()=>{const t=()=>{new Gitalk(Object.assign({clientID:"e1723135269b287b0966",clientSecret:"b3eb09deb82a253cc57efd054834f5dac3354cb8",repo:"tinsir888.github.io-gittalk",owner:"tinsir888",admin:["tinsir888"],id:"92ab4993b1061fac003b800e2de2f313",updateCountCallback:i},null)).render("gitalk-container")},e=async()=>{"function"==typeof Gitalk||(await getCSS("https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"),await getScript("https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js")),t()},i=t=>{const e=document.querySelector("#post-meta .gitalk-comment-count");e&&(e.textContent=t)};e()})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>